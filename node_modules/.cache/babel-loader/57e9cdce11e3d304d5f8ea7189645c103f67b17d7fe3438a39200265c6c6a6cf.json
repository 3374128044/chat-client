{"ast":null,"code":"var _jsxFileName = \"/Users/csuftitan/Desktop/chat-client/src/App.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect, useRef } from 'react';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst SOCKET_URL = 'wss://xubzgv3dv1.execute-api.us-east-1.amazonaws.com/production/'; // Replace this\n\nfunction App() {\n  _s();\n  const [ws, setWs] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [name, setName] = useState('');\n  const [connected, setConnected] = useState(false);\n  const [input, setInput] = useState('');\n  const [privateTo, setPrivateTo] = useState('');\n  const [members, setMembers] = useState([]);\n  const messagesEndRef = useRef();\n  useEffect(() => {\n    if (ws) {\n      ws.onmessage = event => {\n        const data = JSON.parse(event.data);\n        if (data.members) {\n          setMembers(data.members);\n        } else {\n          setMessages(prev => [...prev, data]);\n        }\n      };\n    }\n  }, [ws]);\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n  const connect = () => {\n    const socket = new WebSocket(SOCKET_URL);\n    socket.onopen = () => {\n      setWs(socket);\n      setConnected(true);\n      // Automatically send name\n      socket.send(JSON.stringify({\n        action: 'setName',\n        name\n      }));\n    };\n    socket.onclose = () => {\n      setConnected(false);\n      setWs(null);\n    };\n    socket.onerror = err => {\n      console.error(\"WebSocket error\", err);\n    };\n  };\n  const sendPublic = () => {\n    if (ws && input) {\n      ws.send(JSON.stringify({\n        action: 'sendPublic',\n        message: input\n      }));\n      setInput('');\n    }\n  };\n  const sendPrivate = () => {\n    if (ws && input && privateTo) {\n      ws.send(JSON.stringify({\n        action: 'sendPrivate',\n        message: input,\n        to: privateTo\n      }));\n      setInput('');\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      padding: 20,\n      fontFamily: 'sans-serif'\n    },\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"Lambda WebSocket Chat\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 66,\n      columnNumber: 7\n    }, this), !connected ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        placeholder: \"Enter your name\",\n        value: name,\n        onChange: e => setName(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 70,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: connect,\n        disabled: !name,\n        children: \"Connect\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 75,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginBottom: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n          children: \"Members online:\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 13\n        }, this), \" \", members.join(', ')]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          border: '1px solid #ccc',\n          height: 200,\n          overflowY: 'scroll',\n          padding: 10\n        },\n        children: [messages.map((msg, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: JSON.stringify(msg)\n        }, i, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 15\n        }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n          ref: messagesEndRef\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 10\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Your message\",\n          value: input,\n          onChange: e => setInput(e.target.value),\n          style: {\n            width: '60%'\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendPublic,\n          children: \"Send Public\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          marginTop: 5\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          placeholder: \"Private to (name)\",\n          value: privateTo,\n          onChange: e => setPrivateTo(e.target.value),\n          style: {\n            width: 150\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 101,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: sendPrivate,\n          children: \"Send Private\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 107,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 65,\n    columnNumber: 5\n  }, this);\n}\n_s(App, \"Mz5aIYdP9SDpNzYrjVmBQ6atwmo=\");\n_c = App;\nexport default App;\nvar _c;\n$RefreshReg$(_c, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useRef","jsxDEV","_jsxDEV","Fragment","_Fragment","SOCKET_URL","App","_s","ws","setWs","messages","setMessages","name","setName","connected","setConnected","input","setInput","privateTo","setPrivateTo","members","setMembers","messagesEndRef","onmessage","event","data","JSON","parse","prev","_messagesEndRef$curre","current","scrollIntoView","behavior","connect","socket","WebSocket","onopen","send","stringify","action","onclose","onerror","err","console","error","sendPublic","message","sendPrivate","to","style","padding","fontFamily","children","fileName","_jsxFileName","lineNumber","columnNumber","placeholder","value","onChange","e","target","onClick","disabled","marginBottom","join","border","height","overflowY","map","msg","i","ref","marginTop","width","_c","$RefreshReg$"],"sources":["/Users/csuftitan/Desktop/chat-client/src/App.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\n\nconst SOCKET_URL = 'wss://xubzgv3dv1.execute-api.us-east-1.amazonaws.com/production/'; // Replace this\n\nfunction App() {\n  const [ws, setWs] = useState(null);\n  const [messages, setMessages] = useState([]);\n  const [name, setName] = useState('');\n  const [connected, setConnected] = useState(false);\n  const [input, setInput] = useState('');\n  const [privateTo, setPrivateTo] = useState('');\n  const [members, setMembers] = useState([]);\n\n  const messagesEndRef = useRef();\n\n  useEffect(() => {\n    if (ws) {\n      ws.onmessage = (event) => {\n        const data = JSON.parse(event.data);\n        if (data.members) {\n          setMembers(data.members);\n        } else {\n          setMessages(prev => [...prev, data]);\n        }\n      };\n    }\n  }, [ws]);\n\n  useEffect(() => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  const connect = () => {\n    const socket = new WebSocket(SOCKET_URL);\n    socket.onopen = () => {\n      setWs(socket);\n      setConnected(true);\n      // Automatically send name\n      socket.send(JSON.stringify({ action: 'setName', name }));\n    };\n    socket.onclose = () => {\n      setConnected(false);\n      setWs(null);\n    };\n    socket.onerror = (err) => {\n      console.error(\"WebSocket error\", err);\n    };\n  };\n\n  const sendPublic = () => {\n    if (ws && input) {\n      ws.send(JSON.stringify({ action: 'sendPublic', message: input }));\n      setInput('');\n    }\n  };\n\n  const sendPrivate = () => {\n    if (ws && input && privateTo) {\n      ws.send(JSON.stringify({ action: 'sendPrivate', message: input, to: privateTo }));\n      setInput('');\n    }\n  };\n\n  return (\n    <div style={{ padding: 20, fontFamily: 'sans-serif' }}>\n      <h2>Lambda WebSocket Chat</h2>\n\n      {!connected ? (\n        <>\n          <input\n            placeholder=\"Enter your name\"\n            value={name}\n            onChange={(e) => setName(e.target.value)}\n          />\n          <button onClick={connect} disabled={!name}>Connect</button>\n        </>\n      ) : (\n        <>\n          <div style={{ marginBottom: 10 }}>\n            <strong>Members online:</strong> {members.join(', ')}\n          </div>\n\n          <div style={{ border: '1px solid #ccc', height: 200, overflowY: 'scroll', padding: 10 }}>\n            {messages.map((msg, i) => (\n              <div key={i}>{JSON.stringify(msg)}</div>\n            ))}\n            <div ref={messagesEndRef} />\n          </div>\n\n          <div style={{ marginTop: 10 }}>\n            <input\n              placeholder=\"Your message\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              style={{ width: '60%' }}\n            />\n            <button onClick={sendPublic}>Send Public</button>\n          </div>\n\n          <div style={{ marginTop: 5 }}>\n            <input\n              placeholder=\"Private to (name)\"\n              value={privateTo}\n              onChange={(e) => setPrivateTo(e.target.value)}\n              style={{ width: 150 }}\n            />\n            <button onClick={sendPrivate}>Send Private</button>\n          </div>\n        </>\n      )}\n    </div>\n  );\n}\n\nexport default App;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}